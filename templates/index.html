<!doctype html>
<html lang="en">
  <head>
    <!--
      Head block:
      - Sets character encoding and viewport for responsiveness.
      - Includes Bootstrap CSS for styling and layout.
      - Defines custom styles for background, typography, form, container appearance, responsiveness, and animations.
    -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AgroTech Crop Selector</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <style>
      body {
        background: url("{{ url_for('static', filename='background.jpg') }}") no-repeat center center fixed;
        background-size: cover;
      }

      h1 {
        color: mediumseagreen;
        text-align: center;
      }

      .warning {
        color: red;
        font-weight: bold;
        text-align: center;
      }

      .card {
        margin-top: 20px;
        color: white;
      }

      .card-body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 1.1rem;
        line-height: 1.6;
        padding: 1.25rem;
      }

      .card-title {
        font-size: 1.4rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
      }

      .card-text {
        font-size: 1.1rem;
        font-weight: 500;
      }

      .container {
        background-color: transparent;
        backdrop-filter: blur(5px);
        font-weight: bold;
        padding: 20px;
        border-radius: 15px;
        animation: fadeSlideUp 0.8s ease-out;
      }

      @media (max-width: 768px) {
        .form-control {
          margin-bottom: 10px;
        }
      }

      @keyframes fadeSlideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>
  </head>
  <body>

  <!--
    Navigation bar block:
    - Responsive Bootstrap navbar with brand name and menu links.
    - Contains search form (non-functional placeholder).
    - Provides navigation for Home, Contact, and About (disabled).
  -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">AgroTech Crop Selector</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled">About</a>
          </li>
        </ul>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

  <!--
    Main container block:
    - Contains the page title with styling and an emoji.
    - The form for user input: collects soil nutrients (N, P, K), Temperature, Humidity, pH, and Rainfall.
    - Uses Bootstrap grid to layout input fields responsively.
    - Includes input validation hints via placeholders and titles.
    - Displays a dismissible info alert about ideal soil pH.
    - Submit button triggers POST request to "/predict".
  -->
  <div class="container my-3 mt-3">
    <h1 style="color: #006400; text-align: center; margin-bottom: 50px;">
      AgroTech Crop Selector <span>ðŸŒ±</span>
    </h1>

    <form action="/predict" method="POST">
      <div class="row">
        <div class="col-md-4 mb-4">
          <label for="Nitrogen">Nitrogen</label>
          <input type="number" id="Nitrogen" name="Nitrogen" class="form-control" placeholder="Enter Nitrogen" title="Amount of Nitrogen in soil" required>
        </div>
        <div class="col-md-4 mb-4">
          <label for="Phosphorus">Phosphorus</label>
          <input type="number" id="Phosphorus" name="Phosphorus" class="form-control" placeholder="Enter Phosphorus" title="Amount of Phosphorus in soil" required>
        </div>
        <div class="col-md-4 mb-4">
          <label for="Potassium">Potassium</label>
          <input type="number" id="Potassium" name="Potassium" class="form-control" placeholder="Enter Potassium" title="Amount of Potassium in soil" required>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4 mb-4">
          <label for="Temperature">Temperature (Â°C)</label>
          <input type="number" step="0.01" id="Temperature" name="Temperature" class="form-control" placeholder="Enter Temperature in Â°C" title="Temperature in degree Celsius" required>
        </div>
        <div class="col-md-4 mb-4">
          <label for="Humidity">Humidity (%)</label>
          <input type="number" step="0.01" id="Humidity" name="Humidity" class="form-control" placeholder="Enter Humidity in %" title="Humidity percentage" required>
        </div>
        <div class="col-md-4 mb-4">
          <label for="Ph">pH</label>
          <input type="number" step="0.01" id="Ph" name="Ph" class="form-control" placeholder="Enter pH value" title="Soil pH value" required>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4 mb-4">
          <label for="Rainfall">Rainfall (mm)</label>
          <input type="number" step="0.01" id="Rainfall" name="Rainfall" class="form-control" placeholder="Enter Rainfall in mm" title="Rainfall amount in millimeters" required>
        </div>
      </div>

      <div class="alert alert-info alert-dismissible fade show mt-3" role="alert">
        ðŸŒ¾ Tip: Soil with PH between 6-7 is ideal for most crops.
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>

      <div class="row">
        <div class="col-md-12 text-center">
          <button type="submit" class="btn btn-primary btn-lg">Result</button>
        </div>
      </div>
    </form>

    <!--
      Result display block (conditional rendering with Jinja2):
      - If a prediction result exists:
        - Shows a Bootstrap card with a crop image (uses crop name to find matching image file, fallback to default image).
        - Displays the suggested crop name as text.
      - If no result yet:
        - Shows a placeholder card with a default image and prompt text asking user to enter inputs.
    -->
    {% if result %}
    <div class="d-flex justify-content-center mt-4">
      <div class="card bg-dark" style="width: 18rem;">
        <img src="{{ url_for('static', filename=(result|lower|replace(' ', '_') + '.jpg') if (result|lower|replace(' ', '_') + '.jpg') in lookup_static_files else 'default.jpg') }}" class="card-img-top" alt="Suggested Crop Image">
        <div class="card-body">
          <h5 class="card-title">Suggested Crop for Your Farm:</h5>
          <p class="card-text">{{ result }}</p>
        </div>
      </div>
    </div>
    {% else %}
    <div class="d-flex justify-content-center mt-4">
      <div class="card bg-dark" style="width: 18rem;">
        <img src="{{ url_for('static', filename='placeholder.jpg') }}" class="card-img-top" alt="Placeholder Image">
        <div class="card-body">
          <h5 class="card-title">Suggested Crop will appear here</h5>
          <p class="card-text">Enter your soil and weather data above to get started!</p>
        </div>
      </div>
    </div>
    {% endif %}
  </div>

  <!--
    Footer block:
    - Simple centered footer with copyright info styled with dark background.
  -->
  <footer class="text-center text-light bg-dark py-3 mt-5">
    &copy; 2025 AgroTech Crop Selector. All Rights Reserved.
  </footer>

  <!--
    Bootstrap JS script inclusion:
    - Enables Bootstrap interactive components like the navbar toggler and dismissible alerts.
  -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
  </body>
</html>